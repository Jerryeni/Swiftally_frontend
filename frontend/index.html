<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form>
      <!-- <input type="file" id="file" accept="image/*" />
      
      <button id="upload-button">Upload</button> -->

      <input type="email" id="email" placeholder="email">
      <input type="number" id="amount" placeholder="amount">
      <input type="text" id="full-name" placeholder="Your full Name">

      <button id="pay">Pay Now</button>


    </form>

    <script src="https://js.paystack.co/v1/inline.js"></script>

    <script>
      const email = document.getElementById('email');
      const amount = document.getElementById('amount');
      const pay = document.getElementById('pay');
      const fullName = document.getElementById('full-name');

      const sKey = 'sk_test_aad1e25ee1f54cf94440357f5242cd31079216bc';

      pay.addEventListener('click', function(e) {
        e.preventDefault();

        let handler = PaystackPop.setup({
          key: 'pk_test_8a461ca142641ca634dc9dec5dc7bee44c5e79c0', // Replace with your public key
          email: email.value,
          amount: amount.value * 100,
          metadata: {
            fullName: fullName.value
          },
          ref: ''+Math.floor((Math.random() * 1000000000) + 1), // generates a pseudo-unique reference. Please replace with a reference you generated. Or remove the line entirely so our API will generate one for you
          // label: "Optional string that replaces customer email"
          onClose: function(){
            alert('Window closed.');
          },
          callback: function(response){
            let message = 'Payment complete! Reference: ' + response.reference;
            // alert(message);
            // console.log(response);
            fetch('https://api.paystack.co/transaction/verify/' + response.reference, {
              method: 'GET',
              headers: {
                'Authorization': 'Bearer ' + sKey
              }
            }).then(res => res.json()).then(data => {
              console.log(data);
            }).catch(e => {
              console.log(e);
            });
          }
        });
        handler.openIframe();

      });
    </script>

   <!-- <script src="./scripts/scriptOne.js"></script>
   <script src="./scripts/scriptTwo.js"></script> -->
  </body>
</html>
